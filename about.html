<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nisha Rastogi · UX Designer</title>
    <link rel="icon" type="image/png" href="assets/Nisha-Rastogi-logo.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,400&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <a href="work.html" class="nav-logo">
            <img src="assets/Nisha-Rastogi-logo.png" alt="Nisha Rastogi" class="nav-logo-img">
        </a>
        <div class="nav-links">
            <a href="about.html" class="nav-link active">About</a>
            <a href="work.html" class="nav-link">Work</a>
            <a href="https://drive.google.com/file/d/1KHkzAbgnGdrXc4ZmJ6ccnRHTr3GQbf_i/view?usp=sharing" class="nav-link" target="_blank" rel="noopener">Resume</a>
        </div>
    </nav>

    <main class="about-container">
        
        <!-- Still Finding Myself Section -->
        <section class="finding-myself-section" id="hero-section">
            <!-- Loaded dynamically from projects.json -->
        </section>

        <!-- Values Section (My super powers) -->
        <section class="about-section values-section" id="values-section">
            <!-- Loaded dynamically from projects.json -->
        </section>

        <!-- Travel Stories Spiral Gallery -->
        <section class="about-section spiral-section">
            <h2 class="values-header">Travel Stories</h2>
            <div class="spiral-wrapper">
                <div class="spiral-controls-bar">
                    <p class="section-description" id="travel-description">Inspired by soot.com, I built this travel stories canvas, zoom in to take a peek!</p>
                    <div class="spiral-zoom-controls">
                        <button class="spiral-btn" id="zoom-out" title="Zoom Out">−</button>
                        <span class="zoom-level" id="zoom-level">100%</span>
                        <button class="spiral-btn" id="zoom-in" title="Zoom In">+</button>
                        <button class="spiral-btn" id="reset-view" title="Reset View">⟲</button>
                    </div>
                </div>
                <div class="spiral-container" id="spiral-container">
                    <div class="spiral-canvas" id="spiral-canvas">
                        <!-- Images will be dynamically placed here -->
                    </div>
                </div>
            </div>
        </section>

        <hr class="section-divider">

    </main>

    <!-- Testimonials Section (Full Width) -->
    <section class="testimonials-section" id="testimonials-section">
        <div class="testimonials-header">
            <h2 class="values-header">What people say about me</h2>
        </div>
        <div class="testimonials-track-wrapper">
            <div class="testimonials-track" id="testimonials-track">
                <!-- Loaded dynamically -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="about-footer" id="site-footer">
        <!-- Loaded dynamically -->
    </footer>

    <script>
        // ========== Load About Page Content ==========
        async function loadAboutPageContent() {
            try {
                const response = await fetch('data/projects.json');
                const data = await response.json();
                const aboutPage = data.aboutPage;
                
                // Render Hero Section (Still Finding Myself)
                const heroSection = document.getElementById('hero-section');
                if (heroSection && aboutPage.hero) {
                    const imagesHTML = aboutPage.hero.images.map((img, index) => `
                        <div class="fan-card" style="--index: ${index};">
                            <img src="${img}" alt="Personal photo">
                        </div>
                    `).join('');
                    
                    // Build links buttons
                    const links = aboutPage.hero.links || {};
                    let linksHTML = '';
                    if (links.linkedin || links.substack || links.email) {
                        linksHTML = '<div class="hero-links">';
                        if (links.linkedin) {
                            linksHTML += `<a href="${links.linkedin}" target="_blank" rel="noopener" class="hero-link-btn">LinkedIn</a>`;
                        }
                        if (links.substack) {
                            linksHTML += `<a href="${links.substack}" target="_blank" rel="noopener" class="hero-link-btn">Substack</a>`;
                        }
                        if (links.email) {
                            linksHTML += `<a href="mailto:${links.email}" class="hero-link-btn">Email</a>`;
                        }
                        linksHTML += '</div>';
                    }
                    
                    heroSection.innerHTML = `
                        <h1 class="finding-title">${aboutPage.hero.title}</h1>
                        <div class="rotating-text-container">
                            <span class="rotating-text"></span>
                        </div>
                        <p class="finding-subtitle">${aboutPage.hero.subtitle}</p>
                        ${linksHTML}
                        <div class="photo-fan">
                            ${imagesHTML}
                        </div>
                    `;
                    
                    // Initialize rotating text
                    initRotatingText();
                }
                
                // Render Travel Stories Description
                const travelDesc = document.getElementById('travel-description');
                if (travelDesc && aboutPage.travelStories) {
                    travelDesc.textContent = aboutPage.travelStories.description;
                }
                
                // Render Values Section
                const valuesSection = document.getElementById('values-section');
                if (valuesSection && aboutPage.values) {
                    const valuesHTML = aboutPage.values.map(value => `
                        <div class="value-item">
                            <h3 class="value-title">${value.title}</h3>
                            <p class="value-description">${value.description}</p>
                        </div>
                    `).join('');
                    
                    valuesSection.innerHTML = `
                        <div class="values-layout">
                            <h2 class="values-header">My super powers</h2>
                            <div class="values-grid">
                                ${valuesHTML}
                            </div>
                        </div>
                    `;
                }
                
                // Render Testimonials
                const testimonialsTrack = document.getElementById('testimonials-track');
                if (testimonialsTrack && aboutPage.testimonials && aboutPage.testimonials.length > 0) {
                    // Duplicate testimonials enough times to fill the screen and enable smooth looping
                    const minCards = Math.max(8, aboutPage.testimonials.length * 2);
                    let allTestimonials = [];
                    while (allTestimonials.length < minCards) {
                        allTestimonials = [...allTestimonials, ...aboutPage.testimonials];
                    }
                    // Double for seamless loop
                    allTestimonials = [...allTestimonials, ...allTestimonials];
                    
                    testimonialsTrack.innerHTML = allTestimonials.map((t, i) => {
                        // Create varied rotations: -3, -1.5, 0, 1.5, 3 degrees
                        const rotations = [-3, -1.5, 0, 1.5, 3, 2, -2, 1, -1];
                        const rotation = rotations[i % rotations.length];
                        return `
                        <div class="testimonial-card" style="--rotation: ${rotation}deg">
                            <div class="testimonial-header">
                                ${t.image ? `<div class="testimonial-avatar"><img src="${t.image}" alt="${t.name}"></div>` : '<div class="testimonial-avatar-placeholder"></div>'}
                                <div class="testimonial-info">
                                    <h3 class="testimonial-name">${t.name}</h3>
                                    <p class="testimonial-company">${t.company}</p>
                                </div>
                            </div>
                            <p class="testimonial-text">${t.recommendation}</p>
                        </div>
                    `}).join('');
                }
                
                // Render Footer
                const footer = document.getElementById('site-footer');
                const profile = data.profile;
                if (footer && profile) {
                    const footerLinks = [];
                    if (profile.social?.linkedin) footerLinks.push(`<a href="${profile.social.linkedin}" class="footer-link" target="_blank" rel="noopener">LinkedIn</a>`);
                    if (profile.resume) footerLinks.push(`<a href="${profile.resume}" class="footer-link" target="_blank" rel="noopener">Resume</a>`);
                    if (profile.social?.substack) footerLinks.push(`<a href="${profile.social.substack}" class="footer-link" target="_blank" rel="noopener">Substack</a>`);
                    
                    footer.innerHTML = `
                        <a href="mailto:${profile.email}" class="footer-email">${profile.email}</a>
                        <div class="footer-links">
                            ${footerLinks.join('')}
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Error loading about page content:', error);
            }
        }
        
        // Typewriter text animation
        function initRotatingText() {
            const rotatingTexts = [
                { text: "4 years of designing scalable products", color: "#e8f0ff" },
                { text: "Shipped 12+ AI Product Features for 200+ businesses", color: "#e8f8e8" },
                { text: "Storytelling because work should be fun", color: "#fff0e8" },
                { text: "Prototyping ideas with Lovable!", color: "#f0e8ff" }
            ];
            
            const textElement = document.querySelector('.rotating-text');
            if (!textElement) return;
            
            let currentIndex = 0;
            let charIndex = 0;
            let isDeleting = false;
            let currentText = '';
            const typeSpeed = 40;      // Speed of typing
            const deleteSpeed = 20;    // Speed of deleting
            const pauseTime = 1500;    // Pause after typing complete
            
            function type() {
                const fullText = rotatingTexts[currentIndex].text;
                const highlightColor = rotatingTexts[currentIndex].color;
                
                // Set highlight color
                textElement.style.backgroundColor = highlightColor;
                
                if (isDeleting) {
                    // Remove characters
                    currentText = fullText.substring(0, charIndex - 1);
                    charIndex--;
                } else {
                    // Add characters
                    currentText = fullText.substring(0, charIndex + 1);
                    charIndex++;
                }
                
                textElement.textContent = currentText;
                
                // Determine next action
                if (!isDeleting && charIndex === fullText.length) {
                    // Finished typing, pause then start deleting
                    setTimeout(() => {
                        isDeleting = true;
                        type();
                    }, pauseTime);
                    return;
                } else if (isDeleting && charIndex === 0) {
                    // Finished deleting, move to next text
                    isDeleting = false;
                    currentIndex = (currentIndex + 1) % rotatingTexts.length;
                    setTimeout(type, 300);
                    return;
                }
                
                // Continue typing/deleting
                const speed = isDeleting ? deleteSpeed : typeSpeed;
                setTimeout(type, speed);
            }
            
            // Start typewriter
            type();
        }
        
        // Load content on page load
        loadAboutPageContent();

        // ========== Spiral Gallery ==========
        class SpiralGallery {
            constructor() {
                this.container = document.getElementById('spiral-container');
                this.canvas = document.getElementById('spiral-canvas');
                this.zoomLevel = 1.0;  // Start at 100% zoom
                this.minZoom = 0.15;
                this.maxZoom = 3;
                this.panX = 0;
                this.panY = 0;
                this.isDragging = false;
                this.startX = 0;
                this.startY = 0;
                
                // All travel images from the assets/travel folder
                this.images = [
                    'assets/travel/302ff094-ffe2-494d-a486-8abb68fc8aab.JPG',
                    'assets/travel/3K1A5932.JPG',
                    'assets/travel/78929549-F4A4-4EEF-BF7D-2D72023F1B19.JPG',
                    'assets/travel/93a40bf0-4d46-4d15-9fe8-375e8e4239a1.JPG',
                    'assets/travel/F5CE26F8-297C-438C-B34B-347F764DBD34.JPG',
                    'assets/travel/IMG_0124.JPG',
                    'assets/travel/IMG_0327.JPG',
                    'assets/travel/IMG_1109.jpg',
                    'assets/travel/IMG_1240.JPG',
                    'assets/travel/IMG_1475.JPG',
                    'assets/travel/IMG_1599.JPG',
                    'assets/travel/IMG_1614.jpg',
                    'assets/travel/IMG_1746.JPG',
                    'assets/travel/IMG_2023.JPG',
                    'assets/travel/IMG_2040.JPG',
                    'assets/travel/IMG_2380.JPG',
                    'assets/travel/IMG_2874.pNG',
                    'assets/travel/IMG_3256.JPG',
                    'assets/travel/IMG_3358.JPG',
                    'assets/travel/IMG_3649 2.HEIC',
                    'assets/travel/IMG_3649.HEIC',
                    'assets/travel/IMG_4165.heic',
                    'assets/travel/IMG_4714.JPG',
                    'assets/travel/IMG_4791.jpg',
                    'assets/travel/IMG_4815.JPG',
                    'assets/travel/IMG_4861.jpg',
                    'assets/travel/IMG_5221.jpg',
                    'assets/travel/IMG_5481.JPG',
                    'assets/travel/IMG_5532.jpg',
                    'assets/travel/IMG_5538.JPG',
                    'assets/travel/IMG_5558.JPG',
                    'assets/travel/IMG_5616.HEIC',
                    'assets/travel/IMG_5879.JPG',
                    'assets/travel/IMG_5955.JPG',
                    'assets/travel/IMG_6070.JPG',
                    'assets/travel/IMG_6231.JPG',
                    'assets/travel/IMG_6240.JPG',
                    'assets/travel/IMG_6315.JPG',
                    'assets/travel/IMG_6408.JPG',
                    'assets/travel/IMG_6414.JPG',
                    'assets/travel/IMG_6421.JPG',
                    'assets/travel/IMG_6445.jpg',
                    'assets/travel/IMG_7240.JPG',
                    'assets/travel/IMG_7470.HEIC',
                    'assets/travel/IMG_7522.JPG',
                    'assets/travel/IMG_7587 2.JPG',
                    'assets/travel/IMG_7608.JPG',
                    'assets/travel/IMG_8435.JPG',
                    'assets/travel/IMG_9421.JPG',
                    'assets/travel/IMG_9485.jpg',
                    'assets/travel/IMG_9582.JPG',
                    'assets/travel/IMG_9584.JPG',
                    'assets/travel/IMG_9591.HEIC',
                    'assets/travel/IMG_9612.JPG',
                    'assets/travel/IMG_9793.JPG',
                    'assets/travel/dclassic 2022-06-21 173133.099.JPG',
                    'assets/travel/export.PNG'
                ];
                
                this.init();
            }
            
            init() {
                this.createSpiral();
                this.bindEvents();
                this.updateTransform();
            }
            
            createSpiral() {
                const centerX = 1000;
                const centerY = 1000;
                const totalImages = this.images.length;
                
                this.images.forEach((src, index) => {
                    // Create a spiral pattern with golden angle for better distribution
                    const goldenAngle = Math.PI * (3 - Math.sqrt(5)); // ~137.5 degrees
                    const angle = index * goldenAngle;
                    
                    // Very tight spiral - minimal spacing for dense layout
                    const radius = 15 + Math.sqrt(index) * 50;
                    
                    const x = centerX + radius * Math.cos(angle);
                    const y = centerY + radius * Math.sin(angle);
                    
                    // Varied max-widths for images (they will maintain aspect ratio)
                    const widths = [50, 60, 55, 65, 52, 58, 62, 48, 56, 64];
                    const maxWidth = widths[index % widths.length];
                    
                    // Random slight rotation for organic feel
                    const rotation = (Math.random() - 0.5) * 10;
                    
                    // Z-index - center images on top, outer images below
                    const zIndex = totalImages - index;
                    
                    const imgContainer = document.createElement('div');
                    imgContainer.className = 'spiral-image';
                    imgContainer.style.cssText = `
                        left: ${x}px;
                        top: ${y}px;
                        max-width: ${maxWidth}px;
                        transform: translate(-50%, -50%) rotate(${rotation}deg);
                        z-index: ${zIndex};
                    `;
                    
                    const img = document.createElement('img');
                    img.src = src;
                    img.alt = `Travel photo ${index + 1}`;
                    img.loading = 'lazy';
                    img.decoding = 'async';
                    img.style.maxWidth = maxWidth + 'px';
                    img.style.height = 'auto';
                    // Fallback to placeholder if image doesn't exist
                    img.onerror = () => {
                        img.src = `https://picsum.photos/seed/${index + 100}/200/300`;
                    };
                    
                    imgContainer.appendChild(img);
                    this.canvas.appendChild(imgContainer);
                });
            }
            
            bindEvents() {
                this.ticking = false;
                
                // Zoom controls
                document.getElementById('zoom-in').addEventListener('click', () => this.zoom(0.3));
                document.getElementById('zoom-out').addEventListener('click', () => this.zoom(-0.3));
                document.getElementById('reset-view').addEventListener('click', () => this.resetView());
                
                // Mouse wheel zoom - optimized
                this.container.addEventListener('wheel', (e) => {
                    e.preventDefault();
                    const delta = e.deltaY > 0 ? -0.15 : 0.15;
                    this.zoomLevel = Math.max(this.minZoom, Math.min(this.maxZoom, this.zoomLevel + delta));
                    this.scheduleUpdate();
                    document.getElementById('zoom-level').textContent = Math.round(this.zoomLevel * 100) + '%';
                }, { passive: false });
                
                // Pan with mouse drag - optimized
                this.container.addEventListener('mousedown', (e) => {
                    this.isDragging = true;
                    this.startX = e.clientX - this.panX;
                    this.startY = e.clientY - this.panY;
                    this.canvas.style.transition = 'none';
                    this.container.style.cursor = 'grabbing';
                });
                
                document.addEventListener('mousemove', (e) => {
                    if (!this.isDragging) return;
                    this.panX = e.clientX - this.startX;
                    this.panY = e.clientY - this.startY;
                    this.scheduleUpdate();
                });
                
                document.addEventListener('mouseup', () => {
                    if (this.isDragging) {
                        this.isDragging = false;
                        this.canvas.style.transition = 'transform 0.1s ease-out';
                        this.container.style.cursor = 'grab';
                    }
                });
                
                // Touch support - optimized
                this.container.addEventListener('touchstart', (e) => {
                    if (e.touches.length === 1) {
                        this.isDragging = true;
                        this.startX = e.touches[0].clientX - this.panX;
                        this.startY = e.touches[0].clientY - this.panY;
                        this.canvas.style.transition = 'none';
                    }
                }, { passive: true });
                
                this.container.addEventListener('touchmove', (e) => {
                    if (!this.isDragging || e.touches.length !== 1) return;
                    this.panX = e.touches[0].clientX - this.startX;
                    this.panY = e.touches[0].clientY - this.startY;
                    this.scheduleUpdate();
                }, { passive: true });
                
                this.container.addEventListener('touchend', () => {
                    this.isDragging = false;
                    this.canvas.style.transition = 'transform 0.1s ease-out';
                });
            }
            
            scheduleUpdate() {
                if (!this.ticking) {
                    requestAnimationFrame(() => {
                        this.updateTransform();
                        this.ticking = false;
                    });
                    this.ticking = true;
                }
            }
            
            zoom(delta) {
                this.zoomLevel = Math.max(this.minZoom, Math.min(this.maxZoom, this.zoomLevel + delta));
                this.updateTransform();
                document.getElementById('zoom-level').textContent = Math.round(this.zoomLevel * 100) + '%';
            }
            
            resetView() {
                this.canvas.style.transition = 'transform 0.3s ease-out';
                this.zoomLevel = 1.0;
                this.panX = 0;
                this.panY = 0;
                this.updateTransform();
                document.getElementById('zoom-level').textContent = '100%';
            }
            
            updateTransform() {
                this.canvas.style.transform = `translate3d(${this.panX}px, ${this.panY}px, 0) scale(${this.zoomLevel})`;
            }
        }
        
        // Initialize spiral gallery when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            new SpiralGallery();
        });
    </script>
</body>
</html>
